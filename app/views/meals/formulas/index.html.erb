<% content_for(:title, "Meal Formulas") %>

<% content_for(:action_links) do %>
  <% if policy(sample_formula).create? %>
    <%= link_to(icon_tag("plus") << " Create Formula", new_meals_formula_path, class: "btn btn-primary") %>
  <% end %>
<% end %>

<p class="subtitle">
  <%= icon_tag("info-circle") %>
  Meal formulas allow customizing how meal costs and portion counts are calculated.
</p>

<% if formulas.empty? %>
  <div class="center-notice">
    No formulas found.
  </div>
<% else %>
  <table class="index part-width">
    <thead>
      <tr>
        <th>Name</th>
        <th>Meals</th>
        <th>Created On</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% formulas.each do |formula| %>
        <tr class="<%= formula.tr_classes %>">
          <td class="name"><%= link_to(formula.name_with_suffix, meals_formula_path(formula)) %></td>
          <td class="meal-count"><%= formula.meal_count %></td>
          <td class="created-at"><%= formula.created_on %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
