<%= gather_form_for(meal) do |f| %>
  <%= base_error(f) %>

  <%= render("meals/form/general", f: f) %>
  <%= render("meals/form/menu", f: f) %>
  <%= render("meals/form/workers", f: f) %>
  <%= render("meals/form/signups", f: f) %>
  <%= render("meals/form/expenses", f: f) %>

  <%= form_actions do %>
    <%= f.button :submit, class: "btn-primary" %>
  <% end %>
<% end %>

<%= javascript_tag do %>
  $(function() {
    new Gather.Views.AjaxSelect2({el: ".meal-form"});
    new Gather.Views.DirtyChecker({el: '.meal-form'});
    <% unless policy(meal).change_workers_without_notification? %>
      new Gather.Views.WorkerChangeNotificationView({el: '#assignment-fields'});
    <% end %>
  });
<% end %>
